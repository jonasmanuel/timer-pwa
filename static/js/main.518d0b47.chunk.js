(this["webpackJsonptimer-pwa"]=this["webpackJsonptimer-pwa"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(36),i=n.n(r),o=(n(109),n(69)),s=n(11),j=n(59),l=n.n(j),d=n(173),u=n(175),b=n(168),h=n(176),O=(n(110),n(81)),f=n(172),m=n(26),x=n.n(m),p=(n(111),n(83)),g=n.n(p),v=n(84),w=n.n(v),S=n(1),T=["onChange","onStop"],C=function(e){var t=e.onChange,n=e.onStop,a=Object(O.a)(e,T),r=a.paused?0:(new Date).getTime()-a.startTime,i=Object(c.useState)(a.elapsedTime+r),o=Object(s.a)(i,2),j=o[0],b=o[1],x=m.duration(j,"milliseconds");Object(c.useEffect)((function(){var e=null;return a.paused||(e=setInterval((function(){b(a.elapsedTime+(new Date).getTime()-a.startTime)}),1e3)),function(){null!==e&&clearInterval(e)}}),[a]);return Object(S.jsx)(d.a,{sx:{width:200,margin:1},children:Object(S.jsxs)(u.a,{children:[Object(S.jsx)(f.a,{variant:"h6",gutterBottom:!0,children:a.name}),Object(S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(S.jsx)(f.a,{children:x.format("hh:mm:ss",{trim:!1})}),Object(S.jsx)("div",{style:{flex:1}}),Object(S.jsx)(h.a,{onClick:function(){var e=a.elapsedTime,n=a.startTime;a.paused?n=(new Date).getTime():e+=(new Date).getTime()-a.startTime,t(Object.assign(a,{paused:!a.paused,elapsedTime:e,startTime:n}))},children:a.paused?Object(S.jsx)(l.a,{}):Object(S.jsx)(g.a,{})}),Object(S.jsx)(h.a,{onClick:function(){var e=a.elapsedTime;a.paused||(e+=(new Date).getTime()-a.startTime),n(Object.assign(a,{elapsedTime:e}))},children:Object(S.jsx)(w.a,{})})]})]})})},y=n(91),D=n.n(y),k=n(85),W=n(177),I=n(174),P=n(178),N=n(179),E=n(180),A=n(181),B=n(182),F=n(167),L=n(171),M=n(53),J=n.n(M),H=n(86),R=n.n(H),U=n(87),q=n.n(U),z=function(e){var t=e.records;t.sort((function(e,t){return e.recordedDate-t.recordedDate}));var n=J()(t).map((function(e){return x()(new Date(e.recordedDate)).format("WW")})).uniq().value(),a=J()(t).groupBy((function(e){return x()(new Date(e.recordedDate)).format("WW")})),r=Object(c.useState)(!1),i=Object(s.a)(r,2),o=i[0],j=i[1];return Object(S.jsx)(S.Fragment,{children:n.map((function(e){var t=a.get(e),n=J()(t).map((function(e){return e.project?e.project:{name:e.name,psp:""}})).uniqBy("name").value(),c=J()(t).groupBy("name");return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h5",{style:{marginLeft:8},children:["CW",e]}),Object(S.jsx)(W.a,{component:I.a,sx:{margin:1,width:function(e){return"calc(100% - ".concat(e.spacing(2),")")}},children:Object(S.jsxs)(P.a,{children:[Object(S.jsx)(N.a,{children:Object(S.jsxs)(E.a,{children:[Object(S.jsx)(A.a,{children:"PSP"}),Object(S.jsx)(A.a,{children:"Name"}),Object(S.jsx)(A.a,{}),Object(S.jsx)(A.a,{children:"Mo"}),Object(S.jsx)(A.a,{children:"Tu"}),Object(S.jsx)(A.a,{children:"We"}),Object(S.jsx)(A.a,{children:"Th"}),Object(S.jsx)(A.a,{children:"Fr"}),Object(S.jsx)(A.a,{})]})}),Object(S.jsx)(B.a,{children:n.map((function(e){var t,n=c.get(e.name),a=[0,0,0,0,0,0,0],r=Object(k.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;a[new Date(i.recordedDate).getDay()-1]+=i.recordedTime}}catch(s){r.e(s)}finally{r.f()}var o=a.map((function(e){return(Math.round(10*x.a.duration(e,"milliseconds").asHours())/10).toLocaleString()}));return Object(S.jsxs)(E.a,{children:[Object(S.jsx)(A.a,{children:e.psp}),Object(S.jsx)(A.a,{children:e.name}),Object(S.jsx)(A.a,{}),Object(S.jsx)(A.a,{children:o[0]}),Object(S.jsx)(A.a,{children:o[1]}),Object(S.jsx)(A.a,{children:o[2]}),Object(S.jsx)(A.a,{children:o[3]}),Object(S.jsx)(A.a,{children:o[4]}),Object(S.jsxs)(A.a,{children:[Object(S.jsx)(F.a,{title:"Copy Values",children:Object(S.jsx)(h.a,{onClick:function(){navigator.clipboard.writeText("".concat(o[0],"\t").concat(o[1],"\t").concat(o[2],"\t").concat(o[3],"\t").concat(o[4])),j(!0)},children:Object(S.jsx)(R.a,{})})}),Object(S.jsx)(F.a,{title:"Copy PSP and Values",children:Object(S.jsx)(h.a,{onClick:function(){navigator.clipboard.writeText("".concat(e.psp,"\t\t\t").concat(o[0],"\t").concat(o[1],"\t").concat(o[2],"\t").concat(o[3],"\t").concat(o[4])),j(!0)},children:Object(S.jsx)(q.a,{})})})]})]},e.name)}))})]})}),Object(S.jsx)(L.a,{open:o,onClose:function(){return j(!1)},message:"Copied to Clipboard"})]})}))})},G=function(e){var t=e.onClicked,n=e.project;return Object(S.jsx)(d.a,{onClick:function(){return t(n)},sx:{margin:1,height:150,width:150,cursor:"pointer"},children:Object(S.jsx)(u.a,{children:Object(S.jsx)(f.a,{variant:"h6",gutterBottom:!0,children:n.name})})},n.psp)},V=n(183),K=n(170),$=n(88),_=n.n($),Q=n(90),X=n.n(Q),Y=n(89),Z=n.n(Y);function ee(e){var t=e.records,n=e.onDelete,a=e.onArchive,r=Object(c.useState)(!1),i=Object(s.a)(r,2),o=i[0],j=i[1];return Object(S.jsx)(W.a,{component:I.a,sx:{margin:1,width:function(e){return"calc(100% - ".concat(e.spacing(2),")")}},children:Object(S.jsxs)(P.a,{children:[Object(S.jsx)(N.a,{children:Object(S.jsxs)(E.a,{children:[Object(S.jsx)(A.a,{children:"Name"}),Object(S.jsx)(A.a,{children:"Dauer"}),Object(S.jsx)(A.a,{children:"Gespeichert am"}),Object(S.jsx)(A.a,{children:Object(S.jsx)(V.a,{control:Object(S.jsx)(K.a,{checked:o,onChange:function(){return j((function(e){return!e}))}}),label:"Show Archived"})})]})}),Object(S.jsx)(B.a,{children:t.filter((function(e){return o||!e.archived})).map((function(e){return Object(S.jsxs)(E.a,{children:[Object(S.jsx)(A.a,{children:e.name}),Object(S.jsxs)(A.a,{children:[Math.round(10*x.a.duration(e.recordedTime,"milliseconds").asHours())/10," h"]}),Object(S.jsxs)(A.a,{children:[" CW ",x()(new Date(e.recordedDate)).format("WW DD.MM.yyyy HH:mm")]}),Object(S.jsxs)(A.a,{children:[Object(S.jsx)(h.a,{onClick:function(){return n(e)},children:Object(S.jsx)(_.a,{})}),e.archived?Object(S.jsx)(h.a,{onClick:function(){return a(e,!1)},children:Object(S.jsx)(Z.a,{})}):Object(S.jsx)(h.a,{onClick:function(){return a(e,!0)},children:Object(S.jsx)(X.a,{})})]})]},e.id)}))})]})})}var te=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(s.a)(r,2),j=i[0],O=i[1],f=Object(c.useState)(""),m=Object(s.a)(f,2),x=m[0],p=m[1],g=Object(c.useState)(!1),v=Object(s.a)(g,2),w=v[0],T=v[1],y=Object(c.useState)(0),k=Object(s.a)(y,2),W=k[0],I=k[1],P=Object(c.useState)([]),N=Object(s.a)(P,2),E=N[0],A=N[1],B=Object(c.useState)(""),F=Object(s.a)(B,2),L=F[0],M=F[1],J=Object(c.useState)(""),H=Object(s.a)(J,2),R=H[0],U=H[1],q=Object(c.useState)(!1),V=Object(s.a)(q,2),K=V[0],$=V[1];Object(c.useEffect)((function(){(n.length>0||j.length>0)&&localStorage.setItem("timerData",JSON.stringify({storageTimers:n,storageRecords:j,storageId:W}))}),[n,j,W]),Object(c.useEffect)((function(){var e=localStorage.getItem("timerData");if(e){var t=JSON.parse(e),n=t.storageTimers,c=t.storageRecords,r=t.storageId;a(n),I(r),O(c)}var i=localStorage.getItem("projectData");if(i){var o=JSON.parse(i).projects;A(o)}}),[a,O,I,A]),Object(c.useEffect)((function(){E.length>0&&localStorage.setItem("projectData",JSON.stringify({projects:E}))}),[E]);var _=function(e){a((function(t){var n={id:W,name:x,paused:!1,elapsedTime:0,startTime:(new Date).getTime()};return e&&(n.name=e.name,n.project=e,A((function(t){var n=t.filter((function(t){return t.psp!==e.psp}));return n.push(e),n}))),p(""),I((function(e){return e+1})),t.concat(n)}))},Q=function(e){var t=n.findIndex((function(t){return t.id===e.id}));if(t>-1){var c=n.slice(0);c[t]=e,a(c)}},X=function(e){a(n.filter((function(t){return t.id!==e.id}))),O((function(t){return t.concat({id:e.id,name:e.name,recordedTime:e.elapsedTime,recordedDate:(new Date).getTime(),project:e.project})}))};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h2",{style:{marginLeft:8},children:"Projects"}),Object(S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(S.jsx)(d.a,{sx:{margin:1,width:316},children:Object(S.jsxs)(u.a,{children:[Object(S.jsx)(b.a,{label:"Project Name",variant:"standard",value:L,onChange:function(e){return t=e.target.value,$(t.trim().length>0&&R.length>0),void M(t.trim());var t}}),Object(S.jsx)(b.a,{label:"PSP-Element",variant:"standard",value:R,onChange:function(e){return t=e.target.value,$(t.trim().length>0&&L.length>0),void U(t.trim());var t}}),Object(S.jsx)(h.a,{onClick:function(){return function(){var e={name:L,psp:R};U(""),M(""),A((function(t){return t.concat(e)}))}()},disabled:!K,children:Object(S.jsx)(D.a,{})})]})}),E.slice(0).reverse().map((function(e){return Object(S.jsx)(G,{onClicked:_,project:e})}))]}),Object(S.jsx)("h2",{style:{marginLeft:8},children:"Timers"}),Object(S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(S.jsx)(d.a,{sx:{margin:1,width:316},children:Object(S.jsxs)(u.a,{children:[Object(S.jsx)(b.a,{label:"Name",variant:"standard",value:x,onChange:function(e){return t=e.target.value,T(t.trim().length>0),void p(t);var t}}),Object(S.jsx)(h.a,{onClick:function(){return _()},disabled:!w,children:Object(S.jsx)(l.a,{})})]})}),n.map((function(e){return Object(S.jsx)(C,Object(o.a)(Object(o.a)({},e),{},{onChange:Q,onStop:X}),e.id)}))]}),Object(S.jsx)(ee,{records:j,onDelete:function(e){O((function(t){return t.filter((function(t){return t.id!==e.id}))}))},onArchive:function(e,t){e.archived=t;var n=j.findIndex((function(t){return t.id===e.id}));if(n>-1){var c=j.slice(0);c[n]=e,O(c)}}}),Object(S.jsx)(z,{records:j})]})},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e){if("serviceWorker"in navigator){if(new URL("/timer-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/timer-pwa","/service-worker.js");ne?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ae(t,e)}))}}function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},ie=n(184),oe=function(){var e=a.a.useState(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],i=a.a.useState(null),o=Object(s.a)(i,2),j=o[0],l=o[1],d=function(e){r(!0),l(e.waiting)};Object(c.useEffect)((function(){ce({onUpdate:d})}),[]);var u=function(){null===j||void 0===j||j.postMessage({type:"SKIP_WAITING"}),r(!1),window.location.reload()};return Object(S.jsx)(L.a,{open:n,message:"A new version is available!",onClick:u,anchorOrigin:{vertical:"top",horizontal:"center"},action:Object(S.jsx)(ie.a,{color:"inherit",size:"small",onClick:u,children:"Reload"})})};i.a.render(Object(S.jsxs)(a.a.StrictMode,{children:[Object(S.jsx)(te,{}),Object(S.jsx)(oe,{})]}),document.getElementById("root")),ce(),re(console.log)}},[[121,1,2]]]);
//# sourceMappingURL=main.518d0b47.chunk.js.map